<div class="defect-management-content">
    <div class="content-top-box ">
      <ul class="breadcrumb">
        <li class="breadcrumb-item">
          <a class="breadcrumb-link" routerLink="/home">Home</a>
        </li>
      </ul>
      <div class="title-row-flex-both-end">
        <h1 class="main-title">Defect Management</h1>
        <mat-form-field appearence="fill" class="title-row-filed-item">
          <mat-label>Plant</mat-label>
          <mat-select [(value)]="selectedPlant">
            <mat-select-trigger>{{selectedPlant}}</mat-select-trigger>
            <mat-option *ngFor="let Plant of plantList" [value]="Plant">
              {{Plant}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>
  
    <form [formGroup]="searchDefectForm">
      <div class="wrapper-box wrapper-box-shadow table-wrapper">
        <div class="content-top-box-content">
          <h1 class="content-title">Defect Machine</h1>
          <button mat-flat-button class="btn-add-item" (click)="opencreateDefectGroupModel()">
            <span class="btn-icon">
              <svg width="10" height="9" viewBox="0 0 10 9" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M9.18143 5.4235H5.6525V8.9235H4.47619V5.4235H0.947266V4.25684H4.47619V0.756836H5.6525V4.25684H9.18143V5.4235Z"
                  fill="white" />
              </svg>
            </span>
            <span class="btn-text">Create Defect</span>
          </button>
        </div>
        <div class="content-top-row ">
          <mat-form-field appearence="fill" class="top-row-first-filed-item ">
            <mat-label>Load Line Tree</mat-label>
            <input [readonly]="true" matInput>
            <span class="unit-icon-position" matSuffix (click)="openLineTree()">
              <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M15 9.375V5.625H4.6875V6.5625H2.8125V3.75H11.25V0H0V3.75H1.875V13.125H4.6875V15H15V11.25H4.6875V12.1875H2.8125V7.5H4.6875V9.375H15Z"
                  fill="#824AED" />
              </svg>
            </span>
          </mat-form-field>
          <mat-form-field appearence="fill" class="top-row-first-filed-item top-row-filed-rem-item">
            <mat-label>Line</mat-label>
            <mat-select [(value)]="selected" formControlName="line">
              <mat-select-trigger>{{selected}}</mat-select-trigger>
              <mat-option *ngFor="let selectedLine of lineList" [value]="selectedLine">
                {{selectedLine}}
              </mat-option>
            </mat-select>
            <!-- <p>You selected: {{selected}}</p> -->
          </mat-form-field>
          <mat-form-field appearence="fill" class="top-row-first-filed-item top-row-filed-rem-item">
            <mat-label>Machine</mat-label>
            <mat-select name="Machine" formControlName="machine">
              <mat-option *ngFor="let Machine of machineList" [value]="Machine">
                {{Machine}}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field appearence="fill" class="top-row-first-filed-item top-row-filed-rem-item">
            <mat-label>Select Component</mat-label>
            <input [readonly]="true" matInput placeholder="" value="{{ComponentName}}">
            <span class="unit-icon-position" matSuffix (click)="openPlantGroupModel()">
              <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M15 9.375V5.625H4.6875V6.5625H2.8125V3.75H11.25V0H0V3.75H1.875V13.125H4.6875V15H15V11.25H4.6875V12.1875H2.8125V7.5H4.6875V9.375H15Z"
                  fill="#824AED" />
              </svg>
            </span>
          </mat-form-field>
        </div>
        <div class="content-top-row ">
          <mat-form-field appearence="fill" class="top-row-first-filed-item">
            <mat-label>Defect Priority</mat-label>
            <mat-select name="DefectPriority" formControlName="defectPriority">
              <mat-option *ngFor="let DefectPriority of defectPriority" [value]="DefectPriority">
                {{DefectPriority}}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field appearence="fill" class="top-row-first-filed-item top-row-filed-rem-item">
            <mat-label>Defect Status</mat-label>
            <mat-select name="DefectStatus" formControlName="defectStatus">
              <mat-option *ngFor="let defectStatus of defectStatus" [value]="defectStatus">
                {{defectStatus}}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field appearence="fill" class="top-row-first-filed-item top-row-filed-rem-item">
            <mat-label>Defect Classification</mat-label>
            <mat-select name="DefectClassification" formControlName="defectClassification">
              <mat-option *ngFor="let DefectClassification of defectClassification" [value]="DefectClassification">
                {{DefectClassification}}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <div class="btn-position btn-position-defect-management">
            <button mat-flat-button color="accent" class="btn-accent-big btn-accent-big-defect-management">Search
              Defect</button>
            <button mat-flat-button class="btn-white btn-blue-border " type="reset">
              <span class="mat-button-wrapper mat-button-wrapper-blue-text">Reset</span></button>
          </div>
        </div>
  
        <!-- Third Row -->
        <div class="content-row-flex-both-end">
          <h1 class="row-title">Defects List</h1>
  
          <!--Third Row  Search Box -->
          <form class="search-form" [formGroup]="searchForm" (ngSubmit)="onSearch()" [class.active]="isSarchFormVisible">
            <input type="text" formControlName="searchValue" class="form-control" placeholder="Search">
            <button class="search-btn" mat-icon-button aria-label="">
              <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M5.125 0.25C6.41793 0.25 7.65791 0.763614 8.57215 1.67785C9.48639 2.59209 10 3.83207 10 5.125C10 6.3325 9.5575 7.4425 8.83 8.2975L9.0325 8.5H9.625L13.375 12.25L12.25 13.375L8.5 9.625V9.0325L8.2975 8.83C7.4425 9.5575 6.3325 10 5.125 10C3.83207 10 2.59209 9.48639 1.67785 8.57215C0.763614 7.65791 0.25 6.41793 0.25 5.125C0.25 3.83207 0.763614 2.59209 1.67785 1.67785C2.59209 0.763614 3.83207 0.25 5.125 0.25ZM5.125 1.75C3.25 1.75 1.75 3.25 1.75 5.125C1.75 7 3.25 8.5 5.125 8.5C7 8.5 8.5 7 8.5 5.125C8.5 3.25 7 1.75 5.125 1.75Z"
                  fill="black" />
              </svg>
            </button>
          </form>
        </div>
  
  
        <table mat-table [dataSource]="defectManagementVariableGroupData" class="basic-table plant-model-table"
          multiTemplateDataRows matSort>
  
          <!-- PO Column -->
          <ng-container matColumnDef="defectID">
            <th mat-header-cell mat-sort-header-pointer-middle *matHeaderCellDef mat-sort-header class="header-min-width">
              <p class="header-text">Defect ID</p>
            </th>
            <td mat-cell *matCellDef="let element"> {{element.defectID}} </td>
          </ng-container>
  
          <!-- Item Code Column -->
          <ng-container matColumnDef="defect">
            <th mat-header-cell mat-sort-header-pointer-middle *matHeaderCellDef mat-sort-header class="header-min-width">
              <p class="header-text"> Defect</p>
            </th>
            <td mat-cell *matCellDef="let element"> {{element.defect}} </td>
          </ng-container>
  
          <!-- PO Target Column -->
          <ng-container matColumnDef="groupName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              <p class="header-text"> Group Name</p>
            </th>
            <td mat-cell *matCellDef="let element"> {{element.groupName}} </td>
          </ng-container>
  
          <!-- Planned Start Column -->
          <ng-container matColumnDef="plantName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              <p class="header-text"> Plant Name</p>
            </th>
            <td mat-cell *matCellDef="let element"> {{element.plantName}} </td>
          </ng-container>
  
          <!-- Planned End Column -->
          <ng-container matColumnDef="component">
            <th mat-header-cell *matHeaderCellDef mat-sort-header class="grp-order">
              <p class="header-text"> Component Name</p>
            </th>
            <td mat-cell *matCellDef="let element"> {{element.component}} </td>
          </ng-container>
  
          <!-- active Column -->
          <ng-container matColumnDef="machineName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header class="grp-order">
              <p class="header-text"> Machine Name</p>
            </th>
            <td mat-cell *matCellDef="let element"> {{element.machineName}} </td>
          </ng-container>
  
          <!-- createdOn Column -->
          <ng-container matColumnDef="priority">
            <th mat-header-cell *matHeaderCellDef mat-sort-header class="created-on">
              <p class="header-text"> Priority</p>
            </th>
            <td mat-cell *matCellDef="let element"> {{element.priority }} </td>
          </ng-container>
  
          <!-- createdOn Column -->
          <ng-container matColumnDef="defectStatus">
            <th mat-header-cell *matHeaderCellDef mat-sort-header class="created-on">
              <p class="header-text"> Defect Status</p>
            </th>
            <td mat-cell *matCellDef="let element"> {{element.defectStatus }} </td>
          </ng-container>
  
  
          <!-- Expanded Content Column - The detail row is made up of this one column -->
          <ng-container matColumnDef="expandedDetail">
            <td class="extendable-row" *matCellDef="let element"
              [attr.colspan]="defectManagementVariableGroupColumns.length">
              <div class="extendable-row-detail" [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">
                <div class="extendable-table-content">
                  <div class="extendable-table-content-title"> Created on </div>
                  <div class="extendable-table-element"> {{element.createdOn}} </div>
                </div>
                <div class="extendable-table-content">
                  <div class="download-image-group">
                    <div class="download-icon">
                      <img [src]="downloadIconurl" alt="{{downloadIconurl}}" />
                    </div>
                    <span class="download-image-content"> Download Image </span>
                  </div>
                </div>
                <div class="extendable-table-content">
                  <div class="download-image-group">
                    <div class="download-icon">
                      <img [src]="downloadIconurl" alt="{{downloadIconurl}}" />
                    </div>
                    <span class="download-image-content"> Download Post Image </span>
                  </div>
                </div>
                <div class="extendable-table-content">
                  <div class="extendable-table-content-title"> Comments </div>
                  <div class="extendable-table-element"> {{element.comments}} </div>
                </div>
                <div class="extendable-table-content">
                  <div class="row-action-btns">
                    <button mat-icon-button class="edit-btn" aria-label="Edit Row"
                      (click)=" openEditDefectGroupModel(element)">
                      <img [src]="editIconurl" alt="{{editIconurl}}" />
                    </button>
                    <button mat-icon-button class="edit-btn" aria-label="Edit Row">
                      <img [src]="deleteIconurl" alt="{{deleteIconurl}}" />
                    </button>
                    <button mat-icon-button class="edit-btn" aria-label="Edit Row">
                      <img [src]="messageIconurl" alt="{{messageIconurl}}" />
                    </button>
                  </div>
                </div>
              </div>
            </td>
          </ng-container>
  
          <!-- plantModelActions Column -->
          <ng-container matColumnDef="Action">
            <th mat-header-cell *matHeaderCellDef></th>
            <mat-cell *matCellDef="let element">
              <button mat-icon-button *ngIf="expandedElement != element" [class.expanded]="expandedElement == element"
                (click)="expandedElement = element">
                <i class="fa fa-caret-down"></i>
              </button>
              <button mat-icon-button *ngIf="expandedElement == element" [class.expanded]="expandedElement == undefined"
                (click)="expandedElement = undefined">
                <i class="fa fa-caret-up"></i>
              </button>
            </mat-cell>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="defectManagementVariableGroupColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: defectManagementVariableGroupColumns;" matRipple class="element-row">
          </tr>
          <tr mat-row *matRowDef="let row; columns: ['expandedDetail'];" class="example-detail-row"></tr>
        </table>
        <mat-paginator class="basic-paginataor" [pageSizeOptions]="[10, 20]"></mat-paginator>
      </div>
    </form>
  
    <!-- add new table row model -->
    <div class="sidepanel-model-wrapper edit-plant-row-model" [ngClass]="{'active': iscreateDeffectGroupModelVisible}">
      <div class="sidepanel-close" (click)="closeaddNewVariableModel()"></div>
      <div class="model-content">
        <div class="model-top">
          <h2 class="model-title">Create Defect</h2>
          <button mat-icon-button class="model-close-btn" aria-label="Close model" (click)="closeaddNewVariableModel()">
            <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M8.46 7L14 12.54V14H12.54L7 8.46L1.46 14H0V12.54L5.54 7L0 1.46V0H1.46L7 5.54L12.54 0H14V1.46L8.46 7Z"
                fill="black" />
            </svg>
          </button>
        </div>
        <div class="model-body">
          <form [formGroup]="addNewVariableItemlForm" (ngSubmit)="addNewVariableItemlFormSubmit()">
            <div class="form-group">
              <mat-form-field appearance="fill" class="field-fill-with-icon">
                <mat-label>Load Line Tree</mat-label>
                <input [readonly]="true" matInput placeholder="">
                <span class="unit-icon-position" matSuffix (click)="openLineTree()">
                  <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M15 9.375V5.625H4.6875V6.5625H2.8125V3.75H11.25V0H0V3.75H1.875V13.125H4.6875V15H15V11.25H4.6875V12.1875H2.8125V7.5H4.6875V9.375H15Z"
                      fill="#824AED" />
                  </svg>
                </span>
              </mat-form-field>
            </div>
  
            <div class="form-group">
              <mat-form-field appearance="fill" class="field-fill">
                <mat-label>Line</mat-label>
                <mat-select [(value)]="selected" formControlName="line">
                  <mat-select-trigger>{{selected}}</mat-select-trigger>
                  <mat-option *ngFor="let selectedLine of lineList" [value]="selectedLine">
                    {{selectedLine}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="form-group">
              <mat-form-field appearance="fill" class="field-fill">
                <mat-label>Machine</mat-label>
                <mat-select [(value)]="selectedMachine" formControlName="machine">
                  <mat-select-trigger>{{selectedMachine}}</mat-select-trigger>
                  <mat-option *ngFor="let Machine of machineList" [value]="Machine">
                    {{Machine}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="form-group">
              <mat-form-field appearance="fill" class="field-fill-with-icon">
                <mat-label>Select Component</mat-label>
                <input [readonly]="true" matInput placeholder="" value="{{ComponentName}}">
                <span class="unit-icon-position" matSuffix (click)="openPlantGroupModel()">
                  <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M15 9.375V5.625H4.6875V6.5625H2.8125V3.75H11.25V0H0V3.75H1.875V13.125H4.6875V15H15V11.25H4.6875V12.1875H2.8125V7.5H4.6875V9.375H15Z"
                      fill="#824AED" />
                  </svg>
                </span>
              </mat-form-field>
            </div>
            <div class="form-group">
              <mat-form-field appearance="fill" class="field-fill">
                <mat-label>Component</mat-label>
                <mat-select [(value)]="selectedComponent" formControlName="component">
                  <mat-select-trigger>{{selectedComponent}}</mat-select-trigger>
                  <mat-option *ngFor="let component of componentList" [value]="component">
                    {{component}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="form-group">
              <mat-form-field appearance="fill" class="field-fill">
                <mat-label>Defect</mat-label>
                <input matInput placeholder="Defect" formControlName="defect">
              </mat-form-field>
            </div>
            <div class="form-group">
              <mat-form-field appearance="fill" class="field-fill">
                <mat-label>Defect Type</mat-label>
                <mat-select [(value)]="selectedDefectType" formControlName="defectType">
                  <mat-select-trigger>{{selectedDefectType}}</mat-select-trigger>
                  <mat-option *ngFor="let defect of defectType" [value]="defect">
                    {{defect}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="form-group">
              <mat-form-field appearance="fill" class="field-fill">
                <mat-label>Sub Defect Type</mat-label>
                <mat-select [(value)]="selectedSubDefect" formControlName="subDefectType">
                  <mat-select-trigger>{{selectedSubDefect}}</mat-select-trigger>
                  <mat-option *ngFor="let subDefect of subDefectType" [value]="subDefect">
                    {{subDefect}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="form-group">
              <mat-form-field appearance="fill" class="field-fill">
                <mat-label>Defect Priority</mat-label>
                <mat-select [(value)]="selectedDefectPriority" formControlName="defectPriority">
                  <mat-select-trigger>{{selectedDefectPriority}}</mat-select-trigger>
                  <mat-option *ngFor="let priority of defectPriority" [value]="priority">
                    {{priority}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="form-group">
              <mat-form-field appearance="fill" class="field-fill">
                <mat-label>Defect Status</mat-label>
                <mat-select [(value)]="selectedDefectStatus" formControlName="defectStatus">
                  <mat-select-trigger>{{selectedDefectStatus}}</mat-select-trigger>
                  <mat-option *ngFor="let status of defectStatus" [value]="status">
                    {{status}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="form-group">
              <mat-form-field appearance="fill" class="field-fill">
                <mat-label>Defect Classification</mat-label>
                <mat-select [(value)]="selectedDefectClassification" formControlName="defectClassification">
                  <mat-select-trigger>{{selectedDefectClassification}}</mat-select-trigger>
                  <mat-option *ngFor="let classification of defectClassification" [value]="classification">
                    {{classification}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="form-group">
              <mat-form-field appearance="fill" class="field-fill-with-icon">
                <mat-label>Defect On</mat-label>
                <input [readonly]="true" matInput [ngxMatDatetimePicker]="startPicker" formControlName="date">
                <mat-datepicker-toggle matSuffix [for]="$any(startPicker)"></mat-datepicker-toggle>
                <ngx-mat-datetime-picker #startPicker>
                </ngx-mat-datetime-picker>
              </mat-form-field>
            </div>
  
            <div class="form-group">
              <button class="file-upload-button">
                <div class="upload-image-group ">
                  <div class="upload-icon">
                    <img [src]="uploadIconurl" alt="{{uploadIconurl}}" />
                  </div>
                  <input type="file" #fileInput (change)="onFileSelect(fileInput)" />
                  <span class=" upload-image-content"> Upload Image File </span>
                </div>
              </button>
              <span class="file-info">{{ uploadFileInfo }}</span>
            </div>
  
            <div class="model-form-actions">
              <button type="button" mat-flat-button class="btn-cancel" (click)="closeaddNewVariableModel()">
                Cancel
              </button>
              <button mat-flat-button color="accent" class="btn-accent"> Save </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  
    <!-- Edit table row -->
    <div class="sidepanel-model-wrapper edit-plant-row-model" [ngClass]="{'active': iseditDeffectGroupModelVisible}">
      <div class="sidepanel-close" (click)="closeEditDefectGroupModel()"></div>
      <div class="model-content">
        <div class="model-title">
          <h2 class="model-title">Edit {{editGroupModelTitle}}</h2>
          <button mat-icon-button class="model-close-btn" aria-label="Close model" (click)="closeEditDefectGroupModel()">
            <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M8.46 7L14 12.54V14H12.54L7 8.46L1.46 14H0V12.54L5.54 7L0 1.46V0H1.46L7 5.54L12.54 0H14V1.46L8.46 7Z"
                fill="black" />
            </svg>
          </button>
        </div>
        <div class="model-body">
          <form [formGroup]="editTableVariableItemlForm" (ngSubmit)="editTableVariableItemlFormSubmit()">
            <div class="form-group">
              <mat-form-field appearance="fill" class="field-fill">
                <mat-label>Defect Description</mat-label>
                <input matInput placeholder="Defect" formControlName="defect">
              </mat-form-field>
            </div>
            <div class="form-group">
              <mat-form-field appearance="fill" class="field-fill">
                <mat-label>Defect Type</mat-label>
                <mat-select [(value)]="selectedDefectType" formControlName="defectType">
                  <mat-select-trigger>{{selectedDefectType}}</mat-select-trigger>
                  <mat-option *ngFor="let defect of defectType" [value]="defect">
                    {{defect}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="form-group">
              <mat-form-field appearance="fill" class="field-fill">
                <mat-label>Sub Defect Type</mat-label>
                <mat-select [(value)]="selectedSubDefect" formControlName="subDefectType">
                  <mat-select-trigger>{{selectedSubDefect}}</mat-select-trigger>
                  <mat-option *ngFor="let subDefect of subDefectType" [value]="subDefect">
                    {{subDefect}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="form-group">
              <mat-form-field appearance="fill" class="field-fill">
                <mat-label>Defect Priority</mat-label>
                <mat-select [(value)]="selectedDefectPriority" formControlName="defectPriority">
                  <mat-select-trigger>{{selectedDefectPriority}}</mat-select-trigger>
                  <mat-option *ngFor="let priority of defectPriority" [value]="priority">
                    {{priority}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="form-group">
              <mat-form-field appearance="fill" class="field-fill">
                <mat-label>Defect Status</mat-label>
                <mat-select [(value)]="selectedDefectStatus" formControlName="defectStatus">
                  <mat-select-trigger>{{selectedDefectStatus}}</mat-select-trigger>
                  <mat-option *ngFor="let status of defectStatus" [value]="status">
                    {{status}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="form-group">
              <mat-form-field appearance="fill" class="field-fill">
                <mat-label>Defect Classification</mat-label>
                <mat-select [(value)]="selectedDefectClassification" formControlName="defectClassification">
                  <mat-select-trigger>{{selectedDefectClassification}}</mat-select-trigger>
                  <mat-option *ngFor="let classification of defectClassification" [value]="classification">
                    {{classification}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="form-group">
              <mat-form-field appearance="fill" class="field-fill">
                <mat-label>Defect On</mat-label>
                <input matInput formControlName="defectOn">
              </mat-form-field>
            </div>
            <div class="form-group">
              <button class="file-upload-button">
                <div class="upload-image-group ">
                  <div class="upload-icon">
                    <img [src]="uploadIconurl" alt="{{uploadIconurl}}" />
                  </div>
                  <input type="file" #fileInput (change)="onFileSelect(fileInput)" />
                  <span class=" upload-image-content"> Upload Image File </span>
                </div>
              </button>
              <span class="file-info">{{ uploadFileInfo }}</span>
            </div>
            <div class="form-group">
              <mat-form-field appearance="fill" class="field-fill">
                <mat-label>Action Plan</mat-label>
                <input matInput formControlName="defect">
              </mat-form-field>
            </div>
            <div class="form-group">
              <mat-form-field appearance="fill" class="field-fill">
                <mat-label>Assign to</mat-label>
                <input matInput formControlName="assignTo">
              </mat-form-field>
            </div>
            <div class="form-group">
              <mat-form-field appearance="fill" class="field-fill">
                <mat-label>Target Date</mat-label>
                <input matInput formControlName="targetDate">
              </mat-form-field>
            </div>
            <div class="form-group">
              <mat-form-field appearance="fill" class="field-fill">
                <mat-label>Close Date</mat-label>
                <input matInput formControlName="closeDate">
              </mat-form-field>
            </div>
            <div class="form-group">
              <mat-form-field appearance="fill" class="field-fill">
                <mat-label>Comments</mat-label>
                <input matInput formControlName="comments">
              </mat-form-field>
            </div>
            <div class="form-group">
              <button class="file-upload-button">
                <div class="upload-image-group ">
                  <div class="upload-icon">
                    <img [src]="uploadIconurl" alt="{{uploadIconurl}}" />
                  </div>
                  <input type="file" #postFileInput (change)="onPostImageFileSelect(postFileInput)" />
                  <span class=" upload-image-content"> Upload Post Image </span>
                </div>
              </button>
              <span class="file-info">{{ postImageFileInfo }}</span>
            </div>
            <div class="model-form-actions">
              <button type="button" mat-flat-button class="btn-cancel" (click)="closeEditDefectGroupModel()">
                Cancel
              </button>
              <button mat-flat-button color="accent" class="btn-accent"> Save </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  
  
    <!-- plant group view model -->
    <div class="sidepanel-model-wrapper open-plant-group-model" [ngClass]="{'active': isPlantGroupModelVisible}">
      <div class="sidepanel-close" (click)="closePlantGroupModel()"></div>
      <div class="model-content">
        <div class="model-top">
          <h2 class="model-title">Group Structure</h2>
          <button mat-icon-button class="model-close-btn" aria-label="Close model" (click)="closePlantGroupModel()">
            <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M8.46 7L14 12.54V14H12.54L7 8.46L1.46 14H0V12.54L5.54 7L0 1.46V0H1.46L7 5.54L12.54 0H14V1.46L8.46 7Z"
                fill="black" />
            </svg>
          </button>
        </div>
        <div class="model-body">
          <div class="tree-controls">
            <button mat-flat-button class="btn-tree-control" (click)="collapseAllNode()">
              <div class="icon">
                <img [src]="collapseAllImgurl" alt="{{collapseAllImgurl}}" />
              </div>
              <p class="btn-text">Collapse All</p>
            </button>
            <button mat-flat-button class="btn-tree-control" (click)="expandAllNode()">
              <div class="icon">
                <img [src]="expandAllImgurl" alt="{{expandAllImgurl}}" />
              </div>
              <p class="btn-text">Expand All</p>
            </button>
          </div>
          <mat-tree #treeSelector class="basic-tree-structure" [dataSource]="plantGroupSource"
            [treeControl]="treeControl">
            <!-- This is the tree node template for leaf nodes -->
            <mat-tree-node *matTreeNodeDef="let node" class="child-node " matTreeNodePadding
              (click)="SelectNodeName(node)">
              <li class="tree-node">
                <!-- use a disabled button to provide padding for tree leaf -->
                <div class="tree-content ">
                  <button mat-icon-button disabled class="child-space-elem"></button>
                  <div class="node-icon">
                    <div [ngSwitch]="node.title">
                      <div *ngSwitchCase="'GRP'">
                        <img [src]="grpImgurl" alt="{{grpImgurl}}" />
                      </div>
                      <div *ngSwitchCase="'PLT'">
                        <img [src]="pltImgurl" alt="{{pltImgurl}}" />
                      </div>
                      <div *ngSwitchCase="'DIV'">
                        <img [src]="divImgurl" alt="{{divImgurl}}" />
                      </div>
                      <div *ngSwitchCase="'DPT'">
                        <img [src]="dptImgurl" alt="{{dptImgurl}}" />
                      </div>
                      <div *ngSwitchCase="'LIN'">
                        <img [src]="linImgurl" alt="{{linImgurl}}" />
                      </div>
                      <div *ngSwitchCase="'UNT'">
                        <img [src]="untImgurl" alt="{{untImgurl}}" />
                      </div>
                      <div *ngSwitchCase="'ASM'">
                        <img [src]="asmImgurl" alt="{{asmImgurl}}" />
                      </div>
                      <div *ngSwitchCase="'SAM'">
                        <img [src]="samImgurl" alt="{{samImgurl}}" />
                      </div>
                      <div *ngSwitchCase="'COP'">
                        <img [src]="copImgurl" alt="{{copImgurl}}" />
                      </div>
                    </div>
                  </div>
                  <!-- <div class="selectedtree"> -->
                  <p class="tree-text-main">{{node.title}}</p>
                  <p class="tree-text">{{' - '+node.name}}</p>
                </div>
                <!-- </div> -->
              </li>
            </mat-tree-node>
            <!-- This is the tree node template for expandable nodes -->
            <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild" class="parent-node" matTreeNodePadding
              (click)="SelectNodeName(node)">
              <li class="tree-node">
                <div class="tree-content">
                  <button mat-icon-button class="tree-tpggler" [attr.aria-label]="'Toggle ' + node.name" matTreeNodeToggle
                    [ngClass]="{'node-open': treeControl.isExpanded(node)}">
                    <span *ngIf="!treeControl.isExpanded(node)">
                      <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="0.5" y="0.5" width="14" height="14" stroke="#7B868C" />
                        <path d="M11.25 8.0353H8.03571H6.96429H3.75V6.96387H6.96429H8.03571H11.25V8.0353Z"
                          fill="#7B868C" />
                        <path
                          d="M6.96429 11.25L6.96429 8.03571L6.96429 6.96429L6.96429 3.75L8.03572 3.75L8.03572 6.96429L8.03572 8.03571L8.03572 11.25L6.96429 11.25Z"
                          fill="#7B868C" />
                      </svg>
                    </span>
                    <span *ngIf="treeControl.isExpanded(node)">
                      <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="0.5" y="0.5" width="14" height="14" stroke="#7B868C" />
                        <path d="M11.25 8.2853H8.03571H6.96429H3.75V7.21387H6.96429H8.03571H11.25V8.2853Z"
                          fill="#7B868C" />
                      </svg>
                    </span>
                  </button>
                  <div class="node-icon" [ngClass]="{'node-open': treeControl.isExpanded(node)}">
                    <div [ngSwitch]="node.title">
                      <div *ngSwitchCase="'GRP'">
                        <img class="img" [src]="grpImgurl" alt="{{grpImgurl}}" />
                      </div>
                      <div *ngSwitchCase="'PLT'">
                        <img [src]="pltImgurl" alt="{{pltImgurl}}" />
                      </div>
                      <div *ngSwitchCase="'DIV'">
                        <img [src]="divImgurl" alt="{{divImgurl}}" />
                      </div>
                      <div *ngSwitchCase="'DPT'">
                        <img [src]="dptImgurl" alt="{{dptImgurl}}" />
                      </div>
                      <div *ngSwitchCase="'LIN'">
                        <img [src]="linImgurl" alt="{{linImgurl}}" />
                      </div>
                      <div *ngSwitchCase="'UNT'">
                        <img [src]="untImgurl" alt="{{untImgurl}}" />
                      </div>
                      <div *ngSwitchCase="'ASM'">
                        <img [src]="asmImgurl" alt="{{asmImgurl}}" />
                      </div>
                      <div *ngSwitchCase="'SAM'">
                        <img [src]="samImgurl" alt="{{samImgurl}}" />
                      </div>
                      <div *ngSwitchCase="'COP'">
                        <img [src]="copImgurl" alt="{{copImgurl}}" />
                      </div>
                    </div>
                  </div>
                  <p class="tree-text-main">{{node.title}}</p>
                  <p class="tree-text">{{' - '+node.name}}</p>
                </div>
                <ul [ngClass]="!treeControl.isExpanded(node) ? 'node-invisible' : 'node-visible'">
                  <ng-container matTreeNodeOutlet></ng-container>
                </ul>
              </li>
            </mat-nested-tree-node>
          </mat-tree>
        </div>
      </div>
    </div>
  </div>
  
