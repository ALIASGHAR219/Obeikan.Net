<section class="main-top-bar">
  <div class="top-bar-left">
    <button class="navbar-toggler-mob" mat-icon-button aria-label="Mobile menu opener" (click)="mobMenuToggler()">
      <svg width="22" height="16" viewBox="0 0 22 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect y="6.6416" width="22" height="2.12842" fill="#0F0FD1" />
        <rect y="0.256836" width="18" height="2.12842" fill="#0F0FD1" />
        <rect y="13.0273" width="14" height="2.12842" fill="#0F0FD1" />
      </svg>
    </button>
    <a class="top-bar-logo" routerLink="/" *ngIf="!isMenuOpen">
      <img src="assets/images/logo-secondary.svg" alt="O3 Smart Manufacturing">
    </a>
    <button class="search-form-btn-mob" mat-icon-button aria-label="Toggle Search form" (click)="toggleSearchForm()">
      <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M19.3609 18.2168L14.6008 13.2662C15.8247 11.8113 16.4953 9.98069 16.4953 8.07499C16.4953 3.62251 12.8728 0 8.4203 0C3.96782 0 0.345306 3.62251 0.345306 8.07499C0.345306 12.5275 3.96782 16.15 8.4203 16.15C10.0918 16.15 11.6847 15.6458 13.0466 14.6888L17.8428 19.677C18.0432 19.8852 18.3129 20 18.6018 20C18.8753 20 19.1348 19.8957 19.3317 19.7061C19.7502 19.3034 19.7636 18.6357 19.3609 18.2168ZM8.4203 2.10652C11.7114 2.10652 14.3888 4.78391 14.3888 8.07499C14.3888 11.3661 11.7114 14.0435 8.4203 14.0435C5.12921 14.0435 2.45183 11.3661 2.45183 8.07499C2.45183 4.78391 5.12921 2.10652 8.4203 2.10652Z"
          fill="#10123D" />
      </svg>
    </button>
    <form class="search-form" [formGroup]="searchForm" (ngSubmit)="onSubmit()" [class.active]="isSarchFormVisible">
      <input type="text" formControlName="searchValue" class="form-control" placeholder="Type here to search...">
      <button class="search-btn" mat-icon-button aria-label="">
        <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M11.6166 10.9301L8.76059 7.95969C9.49492 7.08675 9.89727 5.98841 9.89727 4.845C9.89727 2.17351 7.72376 0 5.05227 0C2.38078 0 0.207275 2.17351 0.207275 4.845C0.207275 7.51648 2.38078 9.68999 5.05227 9.68999C6.05519 9.68999 7.01091 9.38749 7.82803 8.81326L10.7057 11.8062C10.826 11.9311 10.9878 12 11.1612 12C11.3253 12 11.4809 11.9374 11.5991 11.8237C11.8502 11.5821 11.8582 11.1814 11.6166 10.9301ZM5.05227 1.26391C7.02692 1.26391 8.63336 2.87034 8.63336 4.845C8.63336 6.81965 7.02692 8.42608 5.05227 8.42608C3.07762 8.42608 1.47119 6.81965 1.47119 4.845C1.47119 2.87034 3.07762 1.26391 5.05227 1.26391Z"
            fill="#A3B0CE" />
        </svg>
      </button>
    </form>
  </div>
  <div class="top-bar-right">
    <button mat-icon-button aria-label="">
      <svg width="20" height="18" viewBox="0 0 20 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M0.932106 3.45915H3.70771C4.08055 4.37054 4.97123 5.03337 6.02762 5.03337C7.084 5.03337 7.97468 4.39125 8.34753 3.45915H18.7457C19.2635 3.45915 19.6778 3.04488 19.6778 2.52704C19.6778 2.00921 19.2635 1.59494 18.7457 1.59494H8.34753C7.97468 0.642117 7.084 0 6.02762 0C4.97123 0 4.08055 0.642117 3.70771 1.57422H0.932106C0.414269 1.57422 0 1.98849 0 2.50633C0 3.02417 0.414269 3.45915 0.932106 3.45915Z"
          fill="#10123D" />
        <path
          d="M18.7457 8.07813H15.9701C15.5972 7.16674 14.7066 6.50391 13.6502 6.50391C12.5938 6.50391 11.7031 7.14602 11.3303 8.07813H0.932106C0.414269 8.07813 0 8.4924 0 9.01024C0 9.52807 0.414269 9.94234 0.932106 9.94234H11.3303C11.7031 10.8537 12.5938 11.5166 13.6502 11.5166C14.7066 11.5166 15.5972 10.8744 15.9701 9.94234H18.7457C19.2635 9.94234 19.6778 9.52807 19.6778 9.01024C19.6778 8.4924 19.2635 8.07813 18.7457 8.07813Z"
          fill="#10123D" />
        <path
          d="M18.7457 14.5615H8.34753C7.97468 13.6501 7.084 12.9873 6.02762 12.9873C4.97123 12.9873 4.08055 13.6294 3.70771 14.5615H0.932106C0.414269 14.5615 0 14.9758 0 15.4936C0 16.0115 0.414269 16.4257 0.932106 16.4257H3.70771C4.08055 17.3371 4.97123 18 6.02762 18C7.084 18 7.97468 17.3578 8.34753 16.4257H18.7457C19.2635 16.4257 19.6778 16.0115 19.6778 15.4936C19.6778 14.9965 19.2635 14.5615 18.7457 14.5615Z"
          fill="#10123D" />
      </svg>
    </button>
    <button class="notification-btn" mat-icon-button aria-label=""
      [ngClass]="{'has-notification': notifcationCount > 0}">
      <svg width="18" height="20" viewBox="0 0 18 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M15.9253 11.8083L15.5628 11.5166C15.4654 11.4386 15.3867 11.3397 15.3326 11.2272C15.2785 11.1147 15.2504 10.9915 15.2503 10.8666V7.49995C15.2498 6.05315 14.7474 4.65132 13.8288 3.53359C12.9101 2.41586 11.6321 1.65146 10.2128 1.37079C10.1436 1.10237 9.98716 0.864568 9.76805 0.694784C9.54894 0.524999 9.27961 0.432861 9.00241 0.432861C8.72522 0.432861 8.45588 0.524999 8.23677 0.694784C8.01766 0.864568 7.8612 1.10237 7.79199 1.37079C6.37191 1.65061 5.09297 2.41465 4.17349 3.53246C3.25401 4.65027 2.751 6.05256 2.75033 7.49995V10.8666C2.75025 10.9915 2.72213 11.1147 2.66804 11.2272C2.61395 11.3397 2.53527 11.4386 2.43783 11.5166L2.07533 11.8083C1.63753 12.1583 1.28376 12.602 1.04003 13.1067C0.796312 13.6115 0.66884 14.1644 0.666992 14.725V15.4166C0.666992 15.8586 0.842587 16.2826 1.15515 16.5951C1.46771 16.9077 1.89163 17.0833 2.33366 17.0833H5.77533C5.96316 17.7948 6.38117 18.4242 6.96416 18.8732C7.54715 19.3223 8.26236 19.5658 8.99825 19.5658C9.73413 19.5658 10.4493 19.3223 11.0323 18.8732C11.6153 18.4242 12.0333 17.7948 12.2212 17.0833H15.667C16.109 17.0833 16.5329 16.9077 16.8455 16.5951C17.1581 16.2826 17.3337 15.8586 17.3337 15.4166V14.7333C17.3331 14.1714 17.2062 13.6168 16.9624 13.1105C16.7187 12.6042 16.3642 12.1592 15.9253 11.8083ZM9.00033 17.9166C8.70947 17.9149 8.42414 17.837 8.17269 17.6908C7.92124 17.5446 7.71242 17.3352 7.56699 17.0833H10.4378C10.292 17.3358 10.0826 17.5456 9.83033 17.6919C9.57809 17.8381 9.29189 17.9156 9.00033 17.9166ZM15.667 15.4166H2.33366V14.7333C2.3341 14.421 2.40473 14.1129 2.54032 13.8316C2.67591 13.5503 2.87299 13.3031 3.11699 13.1083L3.47949 12.8166C3.77184 12.5826 4.00786 12.2858 4.17012 11.9483C4.33239 11.6108 4.41676 11.2411 4.41699 10.8666V7.49995C4.41699 6.28438 4.89988 5.11859 5.75942 4.25905C6.61896 3.3995 7.78475 2.91662 9.00033 2.91662C10.2159 2.91662 11.3817 3.3995 12.2412 4.25905C13.1008 5.11859 13.5837 6.28438 13.5837 7.49995V10.8666C13.5833 11.2418 13.6673 11.6123 13.8296 11.9506C13.9919 12.2889 14.2283 12.5863 14.5212 12.8208L14.8837 13.1125C15.1271 13.3069 15.3239 13.5534 15.4594 13.8339C15.595 14.1144 15.6659 14.4217 15.667 14.7333V15.4166Z"
          fill="#10123D" />
      </svg>
      <span class="notification-dot">
        <svg width="11" height="11" viewBox="0 0 11 11" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="5.5" cy="5.5" r="4.75" fill="#FE5C83" stroke="white" stroke-width="1.5" />
        </svg>
      </span>
    </button>
    <button mat-icon-button [matMenuTriggerFor]="menu" class="profile-btn" color="accent" aria-label="Profile">
      <img src="{{userImage !== null ? userImage : 'assets/images/user-profile-img.png'}}" alt="User Profile">
    </button>
    <mat-menu #menu="matMenu">
      <button mat-menu-item>
        <span>{{user.firstName}}</span>
      </button>
      <button mat-menu-item disabled>
        <span>{{user.email}}</span>
      </button>
      <button mat-menu-item (click)="logout()">
        <span>Sign Out</span>
      </button>
    </mat-menu>
  </div>
</section>

